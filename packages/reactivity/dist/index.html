<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div id="app"></div>
    <script type="module">
      import { effect, reactive } from "./reactivity.js";
      // 会对属性进行劫持 proxy、监听用户的获取操作和设置操作
      const state = reactive({ name: "zs", age: 13, address: { num: 30 } });
      // state.name = "wjw";
      // console.log(state.name);

      // const obj = { name: "zf", age: 13, address: { num: 30 } };
      // const state1 = reactive(obj);
      // const state2 = reactive(state1);
      // console.log(state1 === state2);

      // effect 所有的渲染都是基于他实现的 computed watch 组件
      // 默认叫响应式 effect，数据变化会重新执行此函数
      // effect(() => {
      //   // 使用类似 react-hook
      //   app.innerHTML =
      //     state.name + "今年" + state.age + "地址" + state.address.num;
      // });

      // 如果遇到了嵌套属性
      effect(() => {
        // 使用类似 react-hook
        app.innerHTML = state.age;
        effect(() => {
          // 使用类似 react-hook
          app.innerHTML = state.name;
        });
        app.innerHTML = state.address.num;
      });
    </script>
  </body>
</html>
